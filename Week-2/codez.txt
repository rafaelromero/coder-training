<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/picnic">
<link rel="icon" href="data:;base64,=">
<script src="app.js"></script>


<fieldset class="flex two">
                <label><input type="text" id="name" placeholder="movie name"></label>
                <label><input type="text" id="year" placeholder="year"></label>
                <label><input type="text" id="rating" placeholder="rating"><label>
            </fieldset>





<table class="primary" id="movies">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Year</th>
                    <th>Rating</th>
                  </tr>
                </thead>
                <tbody>
                </tbody>
              </table>





    fetch('http://localhost:5000/movies', {
        method: "POST",
        body: JSON.stringify({
            name: movie,
            year: year,
            rating: rating
        }),
        headers:{
            'Content-Type': 'application/json'
        }
    }).then(function(response){
        return response.json();
    })
    .then((json) => {
        alert(json.status)

    })




function GetMovies(){
    fetch('http://localhost:5000/movies', {
        method: "GET",
        headers:{
            'Content-Type': 'application/json'
        }
        
    }).then(function(response){
        return response.json();
    })
    .then((json) => { 
        movies = json.movies;

        ClearTable();
        CreateMovieRows(movies);
    }

    );
}


function CreateMovieRows(movies){
    movies.forEach(movie => {
        var table = document.getElementById('movies');
        var row = table.insertRow();
        var nameCell = row.insertCell(0);
        var yearCell = row.insertCell(1);
        var ratingCell = row.insertCell(2);
        nameCell.innerHTML = movie.name;
        yearCell.innerHTML = movie.year;
        ratingCell.innerHTML = movie.rating;
    });
}


function ClearTable(){
    var table = document.getElementById('movies');
    var rowCount = table.rows.length;
    for (var i = rowCount - 1; i > 0; i--) {
        table.deleteRow(i);
    }
}
